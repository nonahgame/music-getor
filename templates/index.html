<!-- cat > templates/index.html << 'EOF' -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LyricBeats AI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #00ff88, #00ffff); color: #000; font-weight: bold; }
        .card { background: rgba(0,0,0,0.9); color: #0f0; border: 3px solid #0f0; border-radius: 15px; }
        textarea { background: #000 !important; color: #0f0 !important; border: 2px solid #0f0; }
        .counter { color: #ff0000; font-weight: bold; }
        #loading { display: none; }
    </style>
</head>
<body class="p-3">
<div class="container mt-4">
    <h1 class="text-center mb-4 neon">LYRICBEATS AI</h1>
    <div class="card p-4 shadow-lg">
        <form id="genForm">
            <div class="row g-3">
                <div class="col-md-6"><input type="text" class="form-control" id="title" placeholder="Song Title" required></div>
                <div class="col-md-6"><input type="text" class="form-control" id="user_id" value="guest" placeholder="Your Name (optional)"></div>
            </div>
            <div class="mt-3">
                <textarea class="form-control" id="lyrics" rows="10" placeholder="Paste your lyrics here..." required></textarea>
                <div class="text-end mt-1">
                    <span class="counter">Characters: <span id="charCount">0</span>/6000 | Words: <span id="wordCount">0</span></span>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-4"><select class="form-select" id="genre"><option>Hip-Hop</option><option>Pop</option><option>R&B</option><option>Afrobeat</option></select></div>
                <div class="col-md-4"><select class="form-select" id="voice_type"><option>Male Rapper</option><option>Female Singer</option><option>Robot</option></select></div>
                <div class="col-md-4"><select class="form-select" id="file_format"><option value="high_mp4">Music Video (MP4)</option><option value="mp3">Audio Only (MP3)</option></select></div>
            </div>
            <button type="submit" class="btn btn-success btn-lg w-100 mt-4">GENERATE MY SONG</button>
        </form>

        <div id="loading" class="text-center mt-5">
            <h2>Generating Your Hit...</h2>
            <div class="spinner-border text-success" style="width:4rem;height:4rem;"></div>
        </div>

        <div id="result" class="mt-5"></div>
    </div>
</div>

<script>
// Live word & character counter
document.getElementById('lyrics').addEventListener('input', function() {
    const text = this.value;
    const chars = text.length;
    const words = text.trim() ? text.trim().split(/\s+/).length : 0;
    document.getElementById('charCount').textContent = chars;
    document.getElementById('wordCount').textContent = words;
    if (chars > 6000) this.style.borderColor = "red";
    else this.style.borderColor = "#0f0";
});

document.getElementById('genForm').onsubmit = async (e) => {
    e.preventDefault();
    document.getElementById('loading').style.display = 'block';
    document.getElementById('result').innerHTML = '';

    const data = {
        title: document.getElementById('title').value || "My Song",
        lyrics: document.getElementById('lyrics').value,
        genre: document.getElementById('genre').value,
        voice_type: document.getElementById('voice_type').value,
        file_format: document.getElementById('file_format').value,
        user_id: document.getElementById('user_id').value
    };

    };

    const res = await fetch('/generate', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
    });

    const json = await res.json();
    document.getElementById('loading').style.display = 'none';

    document.getElementById('result').innerHTML = `
        <div class="alert alert-success text-center p-4">
            <h2>${json.title || "Your Song"} is Ready!</h2>
            <p><a href="/download/${json.version1}" class="btn btn-light btn-lg mx-2" download>Download Audio</a></p>
            <p><a href="/download/${json.version2}" class="btn btn-warning btn-lg mx-2" download>Download Music Video</a></p>
            <p><small>Public Link: <a href="${json.public_url}" target="_blank">${json.public_url}</a></small></p>
        </div>
    `;
};
</script>
</body>
</html>
<!-- EOF -->
